!function(a){var b=new Array("00","33","66","99","CC","FF"),c=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");a.fn.colorpicker=function(d){function f(){var d=a("body"),e="",f="";for(d.append('<div id="colorpanel" style="position: absolute; display: none;"></div>'),i=0;2>i;i++)for(j=0;6>j;j++)for(e+="<tr height=12>",e+='<td width=11 rel="#000000" style="background-color:#000000">',f=0==i?b[j]+b[j]+b[j]:c[j],e=e+'<td width=11 rel="#'+f+'" style="background-color:#'+f+'">',e+='<td width=11 rel="#000000" style="background-color:#000000">',k=0;3>k;k++)for(l=0;6>l;l++)f=b[k+3*i]+b[l]+b[j],e=e+'<td width=11 rel="#'+f+'" style="background-color:#'+f+'">';e='<table width=253 border="0" cellspacing="0" cellpadding="0" style="border:1px solid #000;"><tr height=30><td colspan=21 bgcolor=#cccccc><table cellpadding="0" cellspacing="1" border="0" style="border-collapse: collapse"><tr><td width="3"><td><input type="text" id="DisColor" size="6" disabled style="border:solid 1px #000000;background-color:#ffff00"></td><td width="3"><td><input type="text" id="HexColor" size="7" style="border:inset 1px;font-family:Arial;" value="#000000"><a href="javascript:void(0);" id="_cclose">关闭</a> | <a href="javascript:void(0);" id="_creset">清除</a></td></tr></table></td></table><table id="CT" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="000000"  style="cursor:pointer;">'+e+"</table>",a("#colorpanel").html(e),d.on("click","#_cclose",function(){return a("#colorpanel").hide(),!1})}function g(a){var b;return a&&a.constructor==Array&&3==a.length&&(a=a),(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))&&(a=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])]),(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))&&(a=[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]),(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))&&(a=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]),(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))&&(a=[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]),"rgb("+a[0]+","+a[1]+","+a[2]+")"}var e=jQuery.extend({},jQuery.fn.colorpicker.defaults,d);return f(),this.each(function(){var b=a(this);b.bind(e.event,function(){var h,c=a(this).offset().top,d=a(this).height(),f=a(this).offset().left;a("#colorpanel").css({top:c+d+5,left:f}).show(),h=e.target?a(e.target):b,null==h.data("color")&&h.data("color",h.css("color")),null==h.data("value")&&h.data("value",h.val()),a("#_creset").bind("click",function(){h.css("color",h.data("color")).val(h.data("value")),a("#colorpanel").hide(),e.reset(b)}),a("#CT tr td").unbind("click").mouseover(function(){var b=a(this).css("background-color");a("#DisColor").css("background",b),a("#HexColor").val(a(this).attr("rel"))}).click(function(){var c=a(this).attr("rel");c=e.ishex?c:g(c),e.fillcolor&&h.val(c),h.css("color",c),a("#colorpanel").hide(),a("#_creset").unbind("click"),e.success(b,c)})})})},jQuery.fn.colorpicker.defaults={ishex:!0,fillcolor:!1,target:null,event:"click",success:function(){},reset:function(){}}}(jQuery);